<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebTeX Hybrid Renderer Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .test-section h3 {
            margin-top: 0;
            color: #333;
        }
        .math-example {
            background: #f9f9f9;
            padding: 10px;
            margin: 10px 0;
            border-left: 4px solid #007cba;
        }
        .description {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <h1>WebTeX Hybrid Renderer Test</h1>
    <p>This page tests the hybrid KaTeX + custom renderer approach. KaTeX should handle most expressions, with the custom renderer as fallback.</p>

    <div class="test-section">
        <h3>Basic Math Expressions</h3>
        <div class="description">Simple inline and display math that KaTeX should handle easily.</div>
        
        <div class="math-example">
            <strong>Inline math:</strong> The quadratic formula is $x = \frac{-b \pm \sqrt{b^2 - 4ac}}{2a}$
        </div>
        
        <div class="math-example">
            <strong>Display math:</strong> The Pythagorean theorem states:
            $$a^2 + b^2 = c^2$$
        </div>
        
        <div class="math-example">
            <strong>Greek letters:</strong> The area of a circle is $A = \pi r^2$ where $\pi \approx 3.14159$
        </div>
    </div>

    <div class="test-section">
        <h3>Complex Mathematical Expressions</h3>
        <div class="description">More complex expressions that test KaTeX's capabilities.</div>
        
        <div class="math-example">
            <strong>Integrals and sums:</strong>
            $$\int_{-\infty}^{\infty} e^{-x^2} dx = \sqrt{\pi}$$
        </div>
        
        <div class="math-example">
            <strong>Matrix notation:</strong>
            $$\begin{pmatrix} a & b \\ c & d \end{pmatrix} \begin{pmatrix} x \\ y \end{pmatrix} = \begin{pmatrix} ax + by \\ cx + dy \end{pmatrix}$$
        </div>
        
        <div class="math-example">
            <strong>Set theory:</strong> For any set $A$: $\forall x \in A, x \in A$ and $\emptyset \subseteq A$
        </div>
    </div>

    <div class="test-section">
        <h3>Edge Cases and Fallback Testing</h3>
        <div class="description">Expressions that might trigger the custom renderer fallback.</div>
        
        <div class="math-example">
            <strong>Mixed content:</strong> This expression $x^2 + y^2 = z^2$ should work with either renderer.
        </div>
        
        <div class="math-example">
            <strong>Special characters:</strong> The inequality $x \leq y \geq z$ uses special symbols.
        </div>
        
        <div class="math-example">
            <strong>Subscripts and superscripts:</strong> Chemical formula $H_2O$ and exponent $e^{i\pi} = -1$
        </div>
    </div>

    <div class="test-section">
        <h3>LaTeX Environments</h3>
        <div class="description">Testing LaTeX environments that should be converted to display math.</div>
        
        <div class="math-example">
            <strong>Equation environment:</strong>
            $$\begin{equation}
            E = mc^2
            \end{equation}$$
        </div>
        
        <div class="math-example">
            <strong>Align environment:</strong>
            $$\begin{align}
            (a + b)^2 &= a^2 + 2ab + b^2 \\
            &= a^2 + b^2 + 2ab
            \end{align}$$
        </div>
    </div>

    <div class="test-section">
        <h3>Mixed Text and Math</h3>
        <div class="description">Testing how the renderer handles mixed content.</div>
        
        <p>This paragraph contains inline math like $f(x) = x^2$ and continues with regular text. 
        We can also have multiple expressions like $\alpha + \beta = \gamma$ and $\sum_{i=1}^{n} i = \frac{n(n+1)}{2}$ 
        all in the same paragraph.</p>
        
        <p>Display math can appear anywhere: $$\int_0^1 x^2 dx = \frac{1}{3}$$ And the text continues normally.</p>
    </div>

    <script>
        // Add some dynamic content to test SPA-like behavior
        setTimeout(() => {
            const newSection = document.createElement('div');
            newSection.className = 'test-section';
            newSection.innerHTML = `
                <h3>Dynamically Added Content</h3>
                <div class="description">This section was added dynamically to test SPA navigation detection.</div>
                <div class="math-example">
                    <strong>Dynamic math:</strong> The derivative of $f(x) = x^3$ is $f'(x) = 3x^2$
                </div>
                <div class="math-example">
                    <strong>Dynamic display math:</strong>
                    $$\lim_{x \to \infty} \frac{1}{x} = 0$$
                </div>
            `;
            document.body.appendChild(newSection);
        }, 2000);
    </script>
</body>
</html> 